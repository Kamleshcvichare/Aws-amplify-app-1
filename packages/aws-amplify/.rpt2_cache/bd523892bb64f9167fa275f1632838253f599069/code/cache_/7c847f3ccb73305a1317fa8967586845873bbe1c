{"code":"/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\nimport { ConsoleLogger as Logger, } from '../../Common';\r\nvar logger = new Logger('CognitoCredentials');\r\nvar FacebookOAuth = /** @class */ (function () {\r\n    function FacebookOAuth() {\r\n    }\r\n    FacebookOAuth.prototype.refreshFacebookToken = function () {\r\n        var fb = window['FB'];\r\n        if (!fb) {\r\n            logger.debug('no fb sdk available');\r\n            return Promise.reject('no fb sdk available');\r\n        }\r\n        return new Promise(function (res, rej) {\r\n            fb.login(function (fbResponse) {\r\n                if (!fbResponse || !fbResponse.authResponse) {\r\n                    logger.debug('no response from facebook when refreshing the jwt token');\r\n                    rej('no response from facebook when refreshing the jwt token');\r\n                }\r\n                var response = fbResponse.authResponse;\r\n                var accessToken = response.accessToken, expiresIn = response.expiresIn;\r\n                var date = new Date();\r\n                var expires_at = expiresIn * 1000 + date.getTime();\r\n                if (!accessToken) {\r\n                    logger.debug('the jwtToken is undefined');\r\n                    rej('the jwtToken is undefined');\r\n                }\r\n                res({ token: accessToken, expires_at: expires_at });\r\n            }, { scope: 'public_profile,email' });\r\n        });\r\n    };\r\n    return FacebookOAuth;\r\n}());\r\nexport default FacebookOAuth;\r\n//# sourceMappingURL=FacebookOAuth.js.map","map":"{\"version\":3,\"file\":\"FacebookOAuth.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/Common/OAuthHelper/FacebookOAuth.ts\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;GAWG;AACH,OAAO,EACH,aAAa,IAAI,MAAM,GAC1B,MAAM,cAAc,CAAC;AAEtB,IAAM,MAAM,GAAG,IAAI,MAAM,CAAC,oBAAoB,CAAC,CAAC;AAEhD;IAAA;IA8BA,CAAC;IA7BU,4CAAoB,GAA3B;QACI,IAAM,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;QACxB,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACN,MAAM,CAAC,KAAK,CAAC,qBAAqB,CAAC,CAAC;YACpC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACjD,CAAC;QAED,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,GAAG,EAAE,GAAG;YACxB,EAAE,CAAC,KAAK,CACJ,UAAA,UAAU;gBACN,EAAE,CAAC,CAAC,CAAC,UAAU,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC;oBAC1C,MAAM,CAAC,KAAK,CAAC,yDAAyD,CAAC,CAAC;oBACxE,GAAG,CAAC,yDAAyD,CAAC,CAAC;gBACnE,CAAC;gBAED,IAAM,QAAQ,GAAG,UAAU,CAAC,YAAY,CAAC;gBACjC,IAAA,kCAAW,EAAE,8BAAS,CAAc;gBAC5C,IAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;gBACxB,IAAM,UAAU,GAAG,SAAS,GAAG,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;gBACrD,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;oBACf,MAAM,CAAC,KAAK,CAAC,2BAA2B,CAAC,CAAC;oBAC1C,GAAG,CAAC,2BAA2B,CAAC,CAAC;gBACrC,CAAC;gBACD,GAAG,CAAC,EAAC,KAAK,EAAE,WAAW,EAAE,UAAU,YAAA,EAAE,CAAC,CAAC;YAC3C,CAAC,EACD,EAAC,KAAK,EAAE,sBAAsB,EAAE,CACnC,CAAC;QACN,CAAC,CAAC,CAAC;IACP,CAAC;IACL,oBAAC;AAAD,CAAC,AA9BD,IA8BC\"}","dts":{"name":"/Users/wezhuo/workplace/aws-amplify/packages/aws-amplify/Common/OAuthHelper/FacebookOAuth.d.ts","text":"export default class FacebookOAuth {\r\n    refreshFacebookToken(): Promise<{}>;\r\n}\r\n"}}
