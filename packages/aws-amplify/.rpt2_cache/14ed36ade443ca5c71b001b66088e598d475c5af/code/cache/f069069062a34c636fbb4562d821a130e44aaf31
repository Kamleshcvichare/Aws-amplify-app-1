{"code":"/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\nvar MIME_MAP = [\r\n    { type: 'text/plain', ext: 'txt' },\r\n    { type: 'text/html', ext: 'html' },\r\n    { type: 'text/javascript', ext: 'js' },\r\n    { type: 'text/css', ext: 'css' },\r\n    { type: 'text/csv', ext: 'csv' },\r\n    { type: 'text/yaml', ext: 'yml' },\r\n    { type: 'text/yaml', ext: 'yaml' },\r\n    { type: 'text/calendar', ext: 'ics' },\r\n    { type: 'text/calendar', ext: 'ical' },\r\n    { type: 'image/png', ext: 'png' },\r\n    { type: 'image/gif', ext: 'gif' },\r\n    { type: 'image/jpeg', ext: 'jpg' },\r\n    { type: 'image/jpeg', ext: 'jpeg' },\r\n    { type: 'image/bmp', ext: 'bmp' },\r\n    { type: 'image/x-icon', ext: 'ico' },\r\n    { type: 'image/tiff', ext: 'tif' },\r\n    { type: 'image/tiff', ext: 'tiff' },\r\n    { type: 'image/svg+xml', ext: 'svg' },\r\n    { type: 'application/json', ext: 'json' },\r\n    { type: 'application/xml', ext: 'xml' },\r\n    { type: 'application/x-sh', ext: 'sh' },\r\n    { type: 'application/zip', ext: 'zip' },\r\n    { type: 'application/x-rar-compressed', ext: 'rar' },\r\n    { type: 'application/x-tar', ext: 'tar' },\r\n    { type: 'application/x-bzip', ext: 'bz' },\r\n    { type: 'application/x-bzip2', ext: 'bz2' },\r\n    { type: 'application/pdf', ext: 'pdf' },\r\n    { type: 'application/java-archive', ext: 'jar' },\r\n    { type: 'application/msword', ext: 'doc' },\r\n    { type: 'application/vnd.ms-excel', ext: 'xls' },\r\n    { type: 'application/vnd.ms-excel', ext: 'xlsx' },\r\n    { type: 'message/rfc822', ext: 'eml' }\r\n];\r\nvar JS = /** @class */ (function () {\r\n    function JS() {\r\n    }\r\n    JS.isEmpty = function (obj) {\r\n        return Object.keys(obj).length === 0;\r\n    };\r\n    JS.sortByField = function (list, field, dir) {\r\n        if (!list || !list.sort) {\r\n            return false;\r\n        }\r\n        var dirX = (dir && dir === 'desc') ? -1 : 1;\r\n        list.sort(function (a, b) {\r\n            var a_val = a[field];\r\n            var b_val = b[field];\r\n            if (typeof b_val === 'undefined') {\r\n                return (typeof a_val === 'undefined') ? 0 : 1 * dirX;\r\n            }\r\n            if (typeof a_val === 'undefined') {\r\n                return -1 * dirX;\r\n            }\r\n            if (a_val < b_val) {\r\n                return -1 * dirX;\r\n            }\r\n            if (a_val > b_val) {\r\n                return 1 * dirX;\r\n            }\r\n            return 0;\r\n        });\r\n        return true;\r\n    };\r\n    JS.objectLessAttributes = function (obj, less) {\r\n        var ret = Object.assign({}, obj);\r\n        if (less) {\r\n            if (typeof less === 'string') {\r\n                delete ret[less];\r\n            }\r\n            else {\r\n                less.forEach(function (attr) {\r\n                    delete ret[attr];\r\n                });\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n    JS.filenameToContentType = function (filename, defVal) {\r\n        if (defVal === void 0) { defVal = 'application/octet-stream'; }\r\n        var name = filename.toLowerCase();\r\n        var filtered = MIME_MAP.filter(function (mime) { return name.endsWith('.' + mime.ext); });\r\n        return filtered.length > 0 ? filtered[0].type : defVal;\r\n    };\r\n    JS.isTextFile = function (contentType) {\r\n        var type = contentType.toLowerCase();\r\n        if (type.startsWith('text/')) {\r\n            return true;\r\n        }\r\n        return ('application/json' === type ||\r\n            'application/xml' === type ||\r\n            'application/sh' === type);\r\n    };\r\n    /**\r\n     * generate random string\r\n     */\r\n    JS.generateRandomString = function () {\r\n        var result = '';\r\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n        for (var i = 32; i > 0; i -= 1) {\r\n            result += chars[Math.floor(Math.random() * chars.length)];\r\n        }\r\n        return result;\r\n    };\r\n    JS.makeQuerablePromise = function (promise) {\r\n        if (promise.isResolved)\r\n            return promise;\r\n        var isPending = true;\r\n        var isRejected = false;\r\n        var isFullfilled = false;\r\n        var result = promise.then(function (data) {\r\n            isFullfilled = true;\r\n            isPending = false;\r\n            return data;\r\n        }, function (e) {\r\n            isRejected = true;\r\n            isPending = false;\r\n            throw e;\r\n        });\r\n        result.isFullfilled = function () { return isFullfilled; };\r\n        result.isPending = function () { return isPending; };\r\n        result.isRejected = function () { return isRejected; };\r\n        return result;\r\n    };\r\n    return JS;\r\n}());\r\nexport default JS;\r\n//# sourceMappingURL=JS.js.map","map":"{\"version\":3,\"file\":\"JS.js\",\"sourceRoot\":\"\",\"sources\":[\"../src/Common/JS.ts\"],\"names\":[],\"mappings\":\"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\"}"}
