{"code":"/*\r\n * Copyright 2017-2017 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\nimport Hub from '../Hub';\r\nimport { ConsoleLogger as Logger } from '../Logger';\r\nvar logger = new Logger('ClientDevice_Browser');\r\nexport function clientInfo() {\r\n    if (typeof window === 'undefined') {\r\n        return {};\r\n    }\r\n    return browserClientInfo();\r\n}\r\nfunction browserClientInfo() {\r\n    if (typeof window === 'undefined') {\r\n        logger.warn('No window object available to get browser client info');\r\n        return {};\r\n    }\r\n    var nav = window.navigator;\r\n    if (!nav) {\r\n        logger.warn('No navigator object available to get browser client info');\r\n        return {};\r\n    }\r\n    var platform = nav.platform, product = nav.product, vendor = nav.vendor, userAgent = nav.userAgent, language = nav.language;\r\n    var type = browserType(userAgent);\r\n    var timezone = browserTimezone();\r\n    return {\r\n        'platform': platform,\r\n        'make': product || vendor,\r\n        'model': type.type,\r\n        'version': type.version,\r\n        'appVersion': [type.type, type.version].join('/'),\r\n        'language': language,\r\n        'timezone': timezone\r\n    };\r\n}\r\nexport function dimension() {\r\n    if (typeof window === 'undefined') {\r\n        logger.warn('No window object available to get browser client info');\r\n        return { width: 320, height: 320 };\r\n    }\r\n    return {\r\n        'width': window.innerWidth,\r\n        'height': window.innerHeight\r\n    };\r\n}\r\nfunction browserTimezone() {\r\n    var tzMatch = /\\(([A-Za-z\\s].*)\\)/.exec(new Date().toString());\r\n    return tzMatch ? tzMatch[1] || \"\" : \"\";\r\n}\r\nfunction browserType(userAgent) {\r\n    var operaMatch = /.+(Opera[\\s[A-Z]*|OPR[\\sA-Z]*)\\/([0-9\\.]+).*/i.exec(userAgent);\r\n    if (operaMatch) {\r\n        return { type: operaMatch[1], version: operaMatch[2] };\r\n    }\r\n    var cfMatch = /.+(Chrome|Firefox|FxiOS)\\/([0-9\\.]+).*/i.exec(userAgent);\r\n    if (cfMatch) {\r\n        return { type: cfMatch[1], version: cfMatch[2] };\r\n    }\r\n    var ieMatch = /.+(Trident|Edge)\\/([0-9\\.]+).*/i.exec(userAgent);\r\n    if (ieMatch) {\r\n        return { type: ieMatch[1], version: ieMatch[2] };\r\n    }\r\n    var sMatch = /.+(Safari)\\/([0-9\\.]+).*/i.exec(userAgent);\r\n    if (sMatch) {\r\n        return { type: sMatch[1], version: sMatch[2] };\r\n    }\r\n    var awkMatch = /.+(AppleWebKit)\\/([0-9\\.]+).*/i.exec(userAgent);\r\n    if (awkMatch) {\r\n        return { type: awkMatch[1], version: awkMatch[2] };\r\n    }\r\n    var anyMatch = /.*([A-Z]+)\\/([0-9\\.]+).*/i.exec(userAgent);\r\n    if (anyMatch) {\r\n        return { type: anyMatch[1], version: anyMatch[2] };\r\n    }\r\n    return { type: '', version: '' };\r\n}\r\nif (typeof window !== 'undefined') {\r\n    window.addEventListener('resize', function () {\r\n        Hub.dispatch('window', { event: 'resize', data: dimension() }, 'DeviceInfo');\r\n    });\r\n    window.addEventListener('scroll', function () {\r\n        var pos = { x: window.scrollX, y: window.scrollY };\r\n        Hub.dispatch('window', { event: 'scroll', data: pos }, 'DeviceInfo');\r\n    });\r\n    window.addEventListener('offline', function () {\r\n        Hub.dispatch('window', { event: 'offline' }, 'DeviceInfor');\r\n    });\r\n    window.addEventListener('online', function () {\r\n        Hub.dispatch('window', { event: 'online' }, 'DeviceInfor');\r\n    });\r\n}\r\n//# sourceMappingURL=browser.js.map","map":"{\"version\":3,\"file\":\"browser.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/Common/ClientDevice/browser.ts\"],\"names\":[],\"mappings\":\"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\"}"}
