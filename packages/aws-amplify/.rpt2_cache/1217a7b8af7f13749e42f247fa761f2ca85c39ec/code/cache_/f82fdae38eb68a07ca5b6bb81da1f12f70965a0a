{"code":"import * as tslib_1 from \"tslib\";\r\n/*\r\n * Copyright 2017-2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\nimport { MqttOverWSProvider } from './MqttOverWSProvider';\r\nimport Auth from '../../Auth';\r\nimport { Signer } from '../../Common';\r\nvar SERVICE_NAME = 'iotdevicegateway';\r\nvar AWSIoTProvider = /** @class */ (function (_super) {\r\n    tslib_1.__extends(AWSIoTProvider, _super);\r\n    function AWSIoTProvider() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(AWSIoTProvider.prototype, \"region\", {\r\n        get: function () { return this.options.aws_pubsub_region; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AWSIoTProvider.prototype.getProviderName = function () { return 'AWSIoTProvider'; };\r\n    Object.defineProperty(AWSIoTProvider.prototype, \"endpoint\", {\r\n        get: function () {\r\n            var _this = this;\r\n            return (function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {\r\n                var endpoint, serviceInfo, _a, access_key, secret_key, session_token, result;\r\n                return tslib_1.__generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            endpoint = this.options.aws_pubsub_endpoint;\r\n                            serviceInfo = {\r\n                                service: SERVICE_NAME,\r\n                                region: this.region\r\n                            };\r\n                            return [4 /*yield*/, Auth.currentCredentials()];\r\n                        case 1:\r\n                            _a = _b.sent(), access_key = _a.accessKeyId, secret_key = _a.secretAccessKey, session_token = _a.sessionToken;\r\n                            result = Signer.signUrl(endpoint, { access_key: access_key, secret_key: secret_key, session_token: session_token }, serviceInfo);\r\n                            return [2 /*return*/, result];\r\n                    }\r\n                });\r\n            }); })();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AWSIoTProvider;\r\n}(MqttOverWSProvider));\r\nexport { AWSIoTProvider };\r\n//# sourceMappingURL=AWSIotProvider.js.map","map":"{\"version\":3,\"file\":\"AWSIotProvider.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/PubSub/Providers/AWSIotProvider.ts\"],\"names\":[],\"mappings\":\";AAAA;;;;;;;;;;;GAWG;AACH,OAAO,EAAE,kBAAkB,EAAE,MAAM,sBAAsB,CAAC;AAC1D,OAAO,IAAI,MAAM,YAAY,CAAC;AAC9B,OAAO,EAAE,MAAM,EAAE,MAAM,cAAc,CAAC;AAEtC,IAAM,YAAY,GAAG,kBAAkB,CAAC;AAExC;IAAoC,0CAAkB;IAAtD;;IAyBA,CAAC;IAvBG,sBAAc,kCAAM;aAApB,cAAyB,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC;;;OAAA;IAE1D,wCAAe,GAAtB,cAA2B,MAAM,CAAC,gBAAgB,CAAC,CAAC,CAAC;IAErD,sBAAc,oCAAQ;aAAtB;YAAA,iBAiBC;YAhBG,MAAM,CAAC,CAAC;;;;;4BACE,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC;4BAE5C,WAAW,GAAG;gCAChB,OAAO,EAAE,YAAY;gCACrB,MAAM,EAAE,IAAI,CAAC,MAAM;6BACtB,CAAC;4BAIE,qBAAM,IAAI,CAAC,kBAAkB,EAAE,EAAA;;4BAH7B,KAGF,SAA+B,EAHd,UAAU,iBAAA,EACV,UAAU,qBAAA,EACb,aAAa,kBAAA;4BAGzB,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,UAAU,YAAA,EAAE,UAAU,YAAA,EAAE,aAAa,eAAA,EAAE,EAAE,WAAW,CAAC,CAAC;4BAEhG,sBAAO,MAAM,EAAC;;;iBACjB,CAAC,EAAE,CAAC;QACT,CAAC;;;OAAA;IAEL,qBAAC;AAAD,CAAC,AAzBD,CAAoC,kBAAkB,GAyBrD\"}","dts":{"name":"/Users/wezhuo/workplace/aws-amplify/packages/aws-amplify/PubSub/Providers/AWSIotProvider.d.ts","text":"import { MqttOverWSProvider } from './MqttOverWSProvider';\r\nexport declare class AWSIoTProvider extends MqttOverWSProvider {\r\n    protected readonly region: any;\r\n    getProviderName(): string;\r\n    protected readonly endpoint: Promise<any>;\r\n}\r\n"}}
